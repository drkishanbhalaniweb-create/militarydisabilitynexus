(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,36618,e=>{"use strict";var t=e.i(40041);let s={async upload(e,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"other",l=e.name.split(".").pop(),i="".concat(s,"/").concat(Date.now(),".").concat(l),r=["medical_record","insurance","identification","other"].includes(a)?a:"other",{data:n,error:o}=await t.supabase.storage.from(t.STORAGE_BUCKETS.MEDICAL_DOCUMENTS).upload(i,e,{cacheControl:"3600",upsert:!1});if(o)throw o;let{data:c,error:d}=await t.supabase.from("file_uploads").insert([{contact_id:s,original_filename:e.name,storage_path:n.path,file_size:e.size,mime_type:e.type,file_category:r,upload_status:"uploaded",is_phi:!0}]).select().single();if(d)throw d;return c},async getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=t.supabase.from("file_uploads").select("*").order("created_at",{ascending:!1});e&&(a=a.eq("contact_id",e)),s&&(a=a.eq("form_submission_id",s));let{data:l,error:i}=await a;if(i)throw i;return l},async getById(e){let{data:s,error:a}=await t.supabase.from("file_uploads").select("*").eq("id",e).single();if(a)throw a;return s},async getDownloadUrl(e){let{data:s,error:a}=await t.supabase.storage.from(t.STORAGE_BUCKETS.MEDICAL_DOCUMENTS).createSignedUrl(e,3600);if(a)throw a;return s.signedUrl},async delete(e,s){let{error:a}=await t.supabase.storage.from(t.STORAGE_BUCKETS.MEDICAL_DOCUMENTS).remove([s]);if(a)throw a;let{error:l}=await t.supabase.from("file_uploads").delete().eq("id",e);if(l)throw l;return!0}};s.upload,s.upload=async function(e,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"other",l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=e.name.split(".").pop(),r="".concat(s,"/").concat(Date.now(),".").concat(i),n=["medical_record","insurance","identification","other"].includes(a)?a:"other",{data:o,error:c}=await t.supabase.storage.from(t.STORAGE_BUCKETS.MEDICAL_DOCUMENTS).upload(r,e,{cacheControl:"3600",upsert:!1});if(c)throw c;let d={original_filename:e.name,storage_path:o.path,file_size:e.size,mime_type:e.type,file_category:n,upload_status:"uploaded",is_phi:!0};l?d.form_submission_id=s:d.contact_id=s;let{data:m,error:h}=await t.supabase.from("file_uploads").insert([d]).select().single();if(h)throw h;return l&&await t.supabase.from("form_submissions").update({has_uploads:!0}).eq("id",s),m},e.s(["blogApi",0,{async getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,{data:s,error:a}=await t.supabase.from("blog_posts").select("*").eq("is_published",!0).order("published_at",{ascending:!1}).limit(e);if(a)throw a;return s},async getBySlug(e){let{data:s,error:a}=await t.supabase.from("blog_posts").select("*").eq("slug",e).eq("is_published",!0).single();if(a)throw a;return s},async search(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=t.supabase.from("blog_posts").select("*").eq("is_published",!0);e&&(a=a.or("title.ilike.%".concat(e,"%,excerpt.ilike.%").concat(e,"%,content_html.ilike.%").concat(e,"%"))),s&&(a=a.eq("category",s));let{data:l,error:i}=await a.order("published_at",{ascending:!1}).limit(50);if(i)throw i;return l}},"contactsApi",0,{async submit(e){let s=e.serviceTypes&&e.serviceTypes.length>0?e.serviceTypes.map(e=>e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())).join(", "):e.subject||"General Inquiry",{data:a,error:l}=await t.supabase.from("contacts").insert([{name:e.name,email:e.email,phone:e.phone||null,subject:s,message:e.message,service_interest:e.serviceTypes?e.serviceTypes.join(", "):e.serviceInterest||e.service||null,status:"new"}]).select().single();if(l)throw l;return a}},"fileUploadApi",0,s,"formSubmissionsApi",0,{async submit(e){let{data:s,error:a}=await t.supabase.from("form_submissions").insert([{form_type:e.formType,full_name:e.fullName,email:e.email,phone:e.phone||null,form_data:e.formData||{},requires_upload:e.requiresUpload||!1,status:"new"}]).select().single();if(a)throw a;return s},async getById(e){let{data:s,error:a}=await t.supabase.from("form_submissions").select("*").eq("id",e).single();if(a)throw a;return s}},"servicesApi",0,{async getAll(){let{data:e,error:s}=await t.supabase.from("services").select("*").eq("is_active",!0).order("display_order",{ascending:!0});if(s)throw s;return e},async getBySlug(e){let{data:s,error:a}=await t.supabase.from("services").select("*").eq("slug",e).eq("is_active",!0).single();if(a)throw a;return s},async delete(e){let{error:s}=await t.supabase.from("services").delete().eq("id",e);if(s)throw s;return!0}}])},77172,e=>{"use strict";let t=(0,e.i(82322).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);e.s(["Users",()=>t],77172)},60594,e=>{"use strict";let t=(0,e.i(82322).default)("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);e.s(["Briefcase",()=>t],60594)},84715,e=>{"use strict";let t=(0,e.i(82322).default)("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);e.s(["MessageSquare",()=>t],84715)},29751,e=>{"use strict";let t=(0,e.i(82322).default)("circle-help",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["HelpCircle",()=>t],29751)},44416,68273,e=>{"use strict";var t=e.i(63716),s=e.i(47392),a=e.i(8480),l=e.i(40041),i=e.i(82322);let r=(0,i.default)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var n=e.i(75711),o=e.i(60594),c=e.i(84715);let d=(0,i.default)("log-out",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var m=e.i(30774),h=e.i(51304);let x=(0,i.default)("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);var u=e.i(77172),p=e.i(29751);let f=(0,i.default)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),g=(0,i.default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var b=e.i(40605),y=e.i(9768);e.s(["default",0,e=>{let{children:i}=e,v=(0,a.useRouter)(),[j,w]=(0,y.useState)(!1),[N,k]=(0,y.useState)(!1);(0,y.useEffect)(()=>{C()},[]);let C=async()=>{try{let{data:{user:e}}=await l.supabase.auth.getUser();if(!e)return;let{data:t,error:s}=await l.supabase.from("admin_users").select("role").eq("id",e.id).maybeSingle();t&&"super_admin"===t.role&&k(!0)}catch(e){console.log("Admin users table not accessible yet")}},_=async()=>{try{await l.supabase.auth.signOut(),b.toast.success("Logged out successfully"),v.push("/admin/login")}catch(e){console.error("Logout error:",e),b.toast.error("Logout failed")}},S=[{name:"Dashboard",href:"/admin/dashboard",icon:r},{name:"Contacts",href:"/admin/contacts",icon:c.MessageSquare},{name:"Form Submissions",href:"/admin/form-submissions",icon:x},{name:"Diagnostics",href:"/admin/diagnostics",icon:g},{name:"Services",href:"/admin/services",icon:o.Briefcase},{name:"Case Studies",href:"/admin/case-studies",icon:f},{name:"Blog Posts",href:"/admin/blog",icon:n.FileText},{name:"Community Q&A",href:"/admin/community",icon:p.HelpCircle},...N?[{name:"Admin Users",href:"/admin/users",icon:u.Users}]:[]];return(0,t.jsxs)("div",{className:"min-h-screen bg-slate-50",children:[(0,t.jsx)("div",{className:"hidden md:fixed md:inset-y-0 md:flex md:w-64 md:flex-col",children:(0,t.jsxs)("div",{className:"flex flex-col flex-grow bg-indigo-700 overflow-y-auto",children:[(0,t.jsx)("div",{className:"flex items-center flex-shrink-0 px-4 py-6",children:(0,t.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Admin Panel"})}),(0,t.jsx)("nav",{className:"flex-1 px-2 pb-4 space-y-1",children:S.map(e=>{let a,l=e.icon;return(0,t.jsxs)(s.default,{href:e.href,className:"group flex items-center px-3 py-3 text-sm font-medium rounded-lg transition-colors ".concat((a=e.href,v.pathname===a)?"bg-indigo-800 text-white":"text-indigo-100 hover:bg-indigo-600 hover:text-white"),children:[(0,t.jsx)(l,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})}),(0,t.jsx)("div",{className:"flex-shrink-0 flex border-t border-indigo-800 p-4",children:(0,t.jsxs)("button",{onClick:_,className:"flex-shrink-0 w-full group flex items-center px-3 py-3 text-sm font-medium text-indigo-100 rounded-lg hover:bg-indigo-600 hover:text-white transition-colors",children:[(0,t.jsx)(d,{className:"mr-3 h-5 w-5"}),"Logout"]})})]})}),(0,t.jsx)("div",{className:"md:hidden fixed top-0 left-0 right-0 bg-indigo-700 z-40",children:(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-4",children:[(0,t.jsx)("h1",{className:"text-xl font-bold text-white",children:"Admin Panel"}),(0,t.jsx)("button",{onClick:()=>w(!j),className:"text-white",children:j?(0,t.jsx)(h.X,{className:"h-6 w-6"}):(0,t.jsx)(m.Menu,{className:"h-6 w-6"})})]})}),j&&(0,t.jsx)("div",{className:"md:hidden fixed inset-0 z-30 bg-indigo-700 pt-16",children:(0,t.jsxs)("nav",{className:"px-2 pb-4 space-y-1",children:[S.map(e=>{let a,l=e.icon;return(0,t.jsxs)(s.default,{href:e.href,onClick:()=>w(!1),className:"group flex items-center px-3 py-3 text-sm font-medium rounded-lg ".concat((a=e.href,v.pathname===a)?"bg-indigo-800 text-white":"text-indigo-100 hover:bg-indigo-600 hover:text-white"),children:[(0,t.jsx)(l,{className:"mr-3 h-5 w-5"}),e.name]},e.name)}),(0,t.jsxs)("button",{onClick:_,className:"w-full flex items-center px-3 py-3 text-sm font-medium text-indigo-100 rounded-lg hover:bg-indigo-600 hover:text-white",children:[(0,t.jsx)(d,{className:"mr-3 h-5 w-5"}),"Logout"]})]})}),(0,t.jsx)("div",{className:"md:pl-64 flex flex-col flex-1",children:(0,t.jsx)("main",{className:"flex-1 pt-16 md:pt-0",children:(0,t.jsx)("div",{className:"py-6",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:i})})})})]})}],44416),e.s(["default",0,e=>{let{children:s}=e,i=(0,a.useRouter)(),[r,n]=(0,y.useState)(!0),[o,c]=(0,y.useState)(null);return((0,y.useEffect)(()=>{(async()=>{var e;let{data:{session:t}}=await l.supabase.auth.getSession(),s=null!=(e=null==t?void 0:t.user)?e:null;c(s),n(!1),s||i.replace("/admin/login")})();let{data:{subscription:e}}=l.supabase.auth.onAuthStateChange((e,t)=>{var s;let a=null!=(s=null==t?void 0:t.user)?s:null;c(a),a||r||i.replace("/admin/login")});return()=>e.unsubscribe()},[i,r]),r)?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):o?s:null}],68273)},58013,e=>{"use strict";let t=(0,e.i(82322).default)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],58013)},52976,e=>{"use strict";let t=(0,e.i(82322).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],52976)},58400,e=>{"use strict";let t=(0,e.i(82322).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>t],58400)},67084,e=>{"use strict";let t=(0,e.i(82322).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],67084)},97955,e=>{"use strict";let t=(0,e.i(82322).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],97955)},98619,e=>{"use strict";let t=(0,e.i(82322).default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["Image",()=>t],98619)},66071,e=>{"use strict";let t=(0,e.i(82322).default)("phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);e.s(["Phone",()=>t],66071)},36034,e=>{"use strict";let t=(0,e.i(82322).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],36034)},46100,e=>{"use strict";let t=(0,e.i(82322).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],46100)},12707,44941,e=>{"use strict";var t=e.i(82322);let s=(0,t.default)("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);e.s(["File",()=>s],12707);let a=(0,t.default)("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>a],44941)},30985,83946,71904,11579,40826,73664,e=>{"use strict";var t=e.i(63716),s=e.i(9768);let a={veteranName:{label:"Veteran's Full Name",section:"Personal Information"},veteranSSN:{label:"Social Security Number",section:"Personal Information"},veteranDOB:{label:"Date of Birth",section:"Personal Information"},veteranPhone:{label:"Phone Number",section:"Personal Information"},veteranEmail:{label:"Email Address",section:"Personal Information"},contactName:{label:"Contact Name",section:"Contact Person"},contactPhone:{label:"Contact Phone",section:"Contact Person"},contactEmail:{label:"Contact Email",section:"Contact Person"},contactRelationship:{label:"Relationship to Veteran",section:"Contact Person"},primaryDiagnosis:{label:"Primary Diagnosis",section:"Medical Information"},secondaryDiagnoses:{label:"Secondary Diagnoses",section:"Medical Information"},currentMedications:{label:"Current Medications",section:"Medical Information"},physicianName:{label:"Primary Physician",section:"Medical Information"},physicianPhone:{label:"Physician Phone",section:"Medical Information"},lastExamDate:{label:"Last Medical Exam",section:"Medical Information"},bathing:{label:"Bathing/Showering",section:"Activities of Daily Living"},dressing:{label:"Dressing/Undressing",section:"Activities of Daily Living"},eating:{label:"Eating/Feeding",section:"Activities of Daily Living"},toileting:{label:"Toileting",section:"Activities of Daily Living"},mobility:{label:"Walking/Mobility",section:"Activities of Daily Living"},transferring:{label:"Transferring",section:"Activities of Daily Living"},continence:{label:"Continence Control",section:"Activities of Daily Living"},supervisionNeeded:{label:"Supervision Level",section:"Care Requirements"},assistanceHours:{label:"Daily Assistance Hours",section:"Care Requirements"},caregiverInfo:{label:"Current Caregiver",section:"Care Requirements"},additionalInfo:{label:"Additional Details",section:"Additional Information"},rushService:{label:"Rush Service",section:"Additional Information"},serviceType:{label:"Service Type",section:"Additional Information"}},l={fullName:{label:"Full Name",section:"Contact Information"},email:{label:"Email",section:"Contact Information"},phone:{label:"Phone",section:"Contact Information"},formType:{label:"Form Type",section:"Request Details"},briefSummary:{label:"Brief Summary",section:"Request Details"}},i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=(e=>{switch(e){case"aid-attendance":case"aid_attendance":return a;case"quick-intake":case"quick_intake":return l;default:return null}})(t),i={};return Object.entries(e).forEach(e=>{let[t,a]=e;if(null==a||""===a)return;let l="General Information",r=t.replace(/([A-Z])/g," $1").replace(/_/g," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ").trim();s&&s[t]&&(l=s[t].section,r=s[t].label),i[l]||(i[l]=[]),i[l].push({key:t,label:r,value:((e,t)=>{if(null==t||""===t)return"Not provided";if("boolean"==typeof t)return t?"Yes":"No";if(Array.isArray(t))return t.length>0?t.join(", "):"Not provided";if("object"==typeof t)return JSON.stringify(t,null,2);if(e.toLowerCase().includes("date")||e.toLowerCase().includes("dob")){let e=new Date(t);if(!isNaN(e.getTime()))return e.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}if(e.toLowerCase().includes("phone")){let e=t.toString().replace(/\D/g,"");if(10===e.length)return"(".concat(e.slice(0,3),") ").concat(e.slice(3,6),"-").concat(e.slice(6))}if(e.toLowerCase().includes("ssn")){let e=t.toString().replace(/\D/g,"");if(9===e.length)return"***-**-".concat(e.slice(5))}return t.toString()})(t,a),rawValue:a})}),Object.entries(i).map(e=>{let[t,s]=e;return{title:t,fields:s}})},r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("object"==typeof e&&null!==e)return{isJSON:!0,sections:i(e,t),rawData:e};if("string"==typeof e){if((e=>{if("string"!=typeof e)return!1;try{let t=JSON.parse(e);return"object"==typeof t&&null!==t}catch(e){return!1}})(e)){let s=(e=>{try{return JSON.parse(e)}catch(e){return console.error("JSON parsing error:",e),null}})(e);if(s)return{isJSON:!0,sections:i(s,t),rawData:s}}return{isJSON:!1,sections:[{title:"Message",fields:[{key:"message",label:"Message",value:e,rawValue:e}]}],rawData:e}}return{isJSON:!1,sections:[{title:"Data",fields:[{key:"data",label:"Data",value:"Unable to parse data",rawValue:e}]}],rawData:e}},n=s.default.memo(e=>{let{data:s,formType:a=null,className:l=""}=e;if(!s)return(0,t.jsx)("div",{className:"text-slate-500 text-sm ".concat(l),children:"No data available"});let i=r(s,a);if(!i.sections||0===i.sections.length)return(0,t.jsx)("div",{className:"text-slate-500 text-sm ".concat(l),children:"Unable to parse form data"});let n=(e=>{if(!e)return null;switch(e.toLowerCase().replace("_","-")){case"aid-attendance":return"Aid & Attendance Form";case"quick-intake":return"Quick Intake Form";default:return e.split(/[-_]/).map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")+" Form"}})(a);return(0,t.jsxs)("div",{className:"space-y-6 ".concat(l),children:[n&&(0,t.jsx)("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:n}),i.sections.map((e,s)=>(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-slate-900 border-b border-slate-200 pb-2",children:e.title}),(0,t.jsx)("div",{className:"space-y-3",children:e.fields.map((e,s)=>(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-slate-700",children:e.label}),(0,t.jsx)("div",{className:"sm:col-span-2 text-sm text-slate-900",children:"string"==typeof e.value&&e.value.includes("\n")?(0,t.jsx)("pre",{className:"whitespace-pre-wrap font-sans",children:e.value}):(0,t.jsx)("span",{children:e.value})})]},s))})]},s))]})});n.displayName="FormDataParser",e.s(["default",0,n],30985);var o=e.i(36618);let c={"image/jpeg":"image","image/jpg":"image","image/png":"image","image/gif":"image","image/webp":"image","image/svg+xml":"image","image/bmp":"image","application/pdf":"pdf","application/msword":"document","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"document","application/vnd.ms-excel":"document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"document","application/vnd.ms-powerpoint":"document","application/vnd.openxmlformats-officedocument.presentationml.presentation":"document","text/plain":"document","text/csv":"document","application/zip":"archive","application/x-rar-compressed":"archive","application/x-7z-compressed":"archive","application/x-tar":"archive","application/gzip":"archive"},d=e=>{if(!e||"string"!=typeof e)return"";let t=e.split(".");return t.length<2?"":t[t.length-1].toLowerCase()},m=e=>e&&c[e.toLowerCase().trim()]||"unknown",h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";switch(m(e)){case"image":return"Image";case"pdf":return"PDF Document";case"document":let s=d(t).toUpperCase();if("DOC"===s||"DOCX"===s)return"Word Document";if("XLS"===s||"XLSX"===s)return"Excel Spreadsheet";if("PPT"===s||"PPTX"===s)return"PowerPoint Presentation";if("TXT"===s)return"Text File";if("CSV"===s)return"CSV File";return"Document";case"archive":return"Archive";default:let a=d(t);return a?"".concat(a.toUpperCase()," File"):"Unknown File"}};var x=e.i(12707),u=e.i(75711),p=e.i(98619),f=e.i(82322);let g=(0,f.default)("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);var b=e.i(44941),y=e.i(97955),v=e.i(46100),j=e.i(40605);let w=e=>{let{count:s=3}=e;return(0,t.jsx)("div",{className:"space-y-3",children:Array.from({length:s}).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg border border-slate-200 animate-pulse",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4 flex-1",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-slate-300 rounded"}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsx)("div",{className:"h-4 bg-slate-300 rounded w-3/4"}),(0,t.jsx)("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-9 h-9 bg-slate-300 rounded-lg"}),(0,t.jsx)("div",{className:"w-9 h-9 bg-slate-300 rounded-lg"})]})]},s))})};e.s(["FileListSkeleton",0,w,"TableRowSkeleton",0,e=>{let{columns:s=7,rows:a=5}=e;return(0,t.jsx)(t.Fragment,{children:Array.from({length:a}).map((e,a)=>(0,t.jsx)("tr",{className:"animate-pulse",children:Array.from({length:s}).map((e,s)=>(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"h-4 bg-slate-200 rounded w-full"})},s))},a))})}],83946);let N=s.default.memo(e=>{let{contactId:a=null,formSubmissionId:l=null,onFileClick:i=null,className:r=""}=e,[n,c]=(0,s.useState)([]),[d,f]=(0,s.useState)(!0),[N,k]=(0,s.useState)(null);(0,s.useEffect)(()=>{C()},[a,l]);let C=async()=>{f(!0),k(null);try{let e=await o.fileUploadApi.getAll(a,l);c(e)}catch(e){console.error("Error fetching files:",e),k("Failed to load documents"),j.toast.error("Failed to load documents")}finally{f(!1)}},_=async(e,t)=>{t.stopPropagation();try{let t=await o.fileUploadApi.getDownloadUrl(e.storage_path),s=document.createElement("a");s.href=t,s.download=e.original_filename,document.body.appendChild(s),s.click(),document.body.removeChild(s),j.toast.success("Download started")}catch(e){console.error("Error downloading file:",e),j.toast.error("Failed to download file")}};return d?(0,t.jsx)("div",{className:r,children:(0,t.jsx)(w,{count:3})}):N?(0,t.jsxs)("div",{className:"text-center py-12 ".concat(r),children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-red-100 rounded-full mx-auto mb-4",children:(0,t.jsx)(v.AlertCircle,{className:"w-6 h-6 text-red-600"})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Failed to Load Documents"}),(0,t.jsx)("p",{className:"text-slate-600 mb-6",children:N}),(0,t.jsx)("button",{onClick:C,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Try Again"})]}):0===n.length?(0,t.jsxs)("div",{className:"text-center py-12 ".concat(r),children:[(0,t.jsx)(x.File,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-slate-500 text-sm",children:"No documents uploaded"})]}):(0,t.jsx)("div",{className:"space-y-3 ".concat(r),children:n.map(e=>{let s=(e=>{switch((e=>{switch(m(e)){case"image":return"Image";case"pdf":case"document":return"FileText";case"archive":return"Archive";default:return"File"}})(e)){case"Image":return p.Image;case"FileText":return u.FileText;case"Archive":return g;default:return x.File}})(e.mime_type),a=h(e.mime_type,e.original_filename),l=(e=>{if(!e||0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB","TB"][t]})(e.file_size),r=new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg border border-slate-200 hover:bg-slate-100 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4 flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)(s,{className:"w-8 h-8 text-indigo-600"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-slate-900 truncate",children:e.original_filename}),(0,t.jsxs)("div",{className:"flex items-center space-x-3 mt-1 text-xs text-slate-500",children:[(0,t.jsx)("span",{children:a}),(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:l}),(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:r})]}),e.file_category&&"other"!==e.file_category&&(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-indigo-100 text-indigo-800",children:e.file_category.replace("_"," ")})})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[i&&(0,t.jsx)("button",{onClick:()=>i(e),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Preview file","aria-label":"Preview ".concat(e.original_filename),children:(0,t.jsx)(y.Eye,{className:"w-5 h-5","aria-hidden":"true"})}),(0,t.jsx)("button",{onClick:t=>_(e,t),className:"p-2 text-slate-600 hover:bg-slate-200 rounded-lg transition-colors",title:"Download file","aria-label":"Download ".concat(e.original_filename),children:(0,t.jsx)(b.Download,{className:"w-5 h-5","aria-hidden":"true"})})]})]},e.id)})})});N.displayName="DocumentViewer",e.s(["default",0,N],71904);var k=e.i(51304),C=e.i(52976);e.s(["default",0,e=>{var a;let{file:l,isOpen:i,onClose:r}=e,[n,c]=(0,s.useState)(null),[d,x]=(0,s.useState)(!0),[u,p]=(0,s.useState)(null);(0,s.useEffect)(()=>{if(!i||!l){c(null),x(!0),p(null);return}(async()=>{x(!0),p(null);try{let e=await o.fileUploadApi.getDownloadUrl(l.storage_path);c(e)}catch(e){console.error("Error generating signed URL:",e),p("Failed to load file. Please try again.")}finally{x(!1)}})()},[i,l]),(0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&i&&r()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[i,r]),(0,s.useEffect)(()=>(i?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[i]);let f=(0,s.useCallback)(e=>{e.target===e.currentTarget&&r()},[r]),g=(0,s.useCallback)(()=>{if(!n)return;let e=document.createElement("a");e.href=n,e.download=l.original_filename,document.body.appendChild(e),e.click(),document.body.removeChild(e)},[n,l]);if(!i)return null;let y="image"===m(a=l.mime_type)?"image":"pdf"===m(a)?"pdf":"none",j=h(l.mime_type,l.original_filename);return m(l.mime_type),(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-2 sm:p-4 z-50",onClick:f,role:"dialog","aria-modal":"true","aria-labelledby":"file-preview-title",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg sm:rounded-xl max-w-5xl w-full max-h-[95vh] sm:max-h-[90vh] flex flex-col shadow-2xl",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 sm:p-4 border-b border-slate-200",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h2",{id:"file-preview-title",className:"text-base sm:text-lg font-semibold text-slate-900 truncate",title:l.original_filename,children:l.original_filename}),(0,t.jsx)("p",{className:"text-xs sm:text-sm text-slate-500 mt-1",children:j})]}),(0,t.jsx)("button",{onClick:r,className:"ml-2 sm:ml-4 text-slate-400 hover:text-slate-600 transition-colors flex-shrink-0","aria-label":"Close preview",children:(0,t.jsx)(k.X,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-auto p-3 sm:p-6 bg-slate-50",children:[d&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full min-h-[400px]",children:[(0,t.jsx)(C.Loader2,{className:"w-12 h-12 text-indigo-600 animate-spin"}),(0,t.jsx)("p",{className:"text-slate-600 mt-4",children:"Loading preview..."})]}),u&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full min-h-[400px]",children:[(0,t.jsx)(v.AlertCircle,{className:"w-12 h-12 text-red-500"}),(0,t.jsx)("p",{className:"text-slate-900 font-medium mt-4",children:u}),(0,t.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Retry"})]}),!d&&!u&&n&&(0,t.jsxs)(t.Fragment,{children:["pdf"===y&&(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden h-full min-h-[400px] sm:min-h-[600px]",children:(0,t.jsx)("iframe",{src:n,className:"w-full h-full min-h-[400px] sm:min-h-[600px]",title:"PDF preview of ".concat(l.original_filename),"aria-label":"PDF document preview"})}),"image"===y&&(0,t.jsx)("div",{className:"flex items-center justify-center",children:(0,t.jsx)("img",{src:n,alt:l.original_filename,className:"max-w-full h-auto rounded-lg shadow-lg",style:{maxHeight:"70vh"}})}),"none"===y&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full min-h-[400px]",children:[(0,t.jsx)(v.AlertCircle,{className:"w-12 h-12 text-slate-400"}),(0,t.jsx)("p",{className:"text-slate-900 font-medium mt-4",children:"Preview not available"}),(0,t.jsx)("p",{className:"text-slate-600 mt-2",children:"This file type cannot be previewed in the browser."}),(0,t.jsx)("p",{className:"text-slate-600",children:"Please download the file to view it."})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row items-stretch sm:items-center justify-between gap-2 sm:gap-0 p-3 sm:p-4 border-t border-slate-200 bg-white",children:[(0,t.jsxs)("button",{onClick:g,disabled:!n||d,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-slate-300 disabled:cursor-not-allowed transition-colors text-sm sm:text-base","aria-label":"Download file",children:[(0,t.jsx)(b.Download,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"Download"})]}),(0,t.jsx)("button",{onClick:r,className:"px-4 py-2 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors text-sm sm:text-base",children:"Close"})]})]})})}],11579),e.i(2105);var _=e.i(17638),S=s;let D=(0,f.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);class A extends S.default.Component{static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:(0,t.jsx)("div",{className:"min-h-[400px] flex items-center justify-center p-6",children:(0,t.jsxs)("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg border border-red-200 p-8",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-red-100 rounded-full mx-auto mb-4",children:(0,t.jsx)(v.AlertCircle,{className:"w-6 h-6 text-red-600"})}),(0,t.jsx)("h2",{className:"text-xl font-bold text-slate-900 text-center mb-2",children:"Something went wrong"}),(0,t.jsx)("p",{className:"text-slate-600 text-center mb-6",children:this.props.errorMessage||"An unexpected error occurred. Please try again."}),!1,(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,t.jsxs)("button",{onClick:this.handleReset,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[(0,t.jsx)(D,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"Try Again"})]}),(0,t.jsx)("button",{onClick:()=>window.location.href="/admin/dashboard",className:"flex-1 px-4 py-2 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Go to Dashboard"})]})]})}):this.props.children}constructor(e){super(e),(0,_._)(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),this.props.onReset&&this.props.onReset()}),this.state={hasError:!1,error:null,errorInfo:null}}}function M(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,[a,l]=(0,s.useState)(e);return(0,s.useEffect)(()=>{let s=setTimeout(()=>{l(e)},t);return()=>{clearTimeout(s)}},[e,t]),a}e.s(["default",0,A],40826),e.s(["useDebounce",()=>M],73664)},15989,e=>{"use strict";var t=e.i(63716),s=e.i(9768),a=e.i(40041),l=e.i(44416),i=e.i(68273),r=e.i(51304),n=e.i(30985),o=e.i(71904),c=e.i(11579);let d=e=>{let{contact:a,isOpen:l,onClose:i,onDelete:d}=e,[m,h]=(0,s.useState)("details"),[x,u]=(0,s.useState)(null),[p,f]=(0,s.useState)(!1);if(!l||!a)return null;let g=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-2 sm:p-4 z-50",onClick:e=>{e.target===e.currentTarget&&i()},role:"dialog","aria-modal":"true","aria-labelledby":"contact-detail-title",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg sm:rounded-xl max-w-4xl w-full max-h-[95vh] sm:max-h-[90vh] flex flex-col shadow-2xl",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b border-slate-200",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0 pr-2",children:[(0,t.jsx)("h2",{id:"contact-detail-title",className:"text-xl sm:text-2xl font-bold text-slate-900 truncate",children:"Contact Details"}),(0,t.jsxs)("p",{className:"text-xs sm:text-sm text-slate-500 mt-1 truncate",children:[a.name," • ",g(a.created_at)]})]}),(0,t.jsx)("button",{onClick:i,className:"text-slate-400 hover:text-slate-600 transition-colors flex-shrink-0","aria-label":"Close modal",children:(0,t.jsx)(r.X,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]}),(0,t.jsx)("div",{className:"border-b border-slate-200 px-4 sm:px-6 overflow-x-auto",children:(0,t.jsx)("nav",{className:"flex space-x-4 sm:space-x-8 min-w-max","aria-label":"Contact detail tabs",children:[{id:"details",label:"Details"},{id:"documents",label:"Documents"},{id:"activity",label:"Activity"}].map(e=>(0,t.jsx)("button",{onClick:()=>h(e.id),className:"\n                    py-3 sm:py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap transition-colors\n                    ".concat(m===e.id?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300","\n                  "),"aria-current":m===e.id?"page":void 0,children:e.label},e.id))})}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:["details"===m&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"Name"}),(0,t.jsx)("p",{className:"text-slate-900 mt-1",children:a.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"Email"}),(0,t.jsx)("p",{className:"text-slate-900 mt-1",children:a.email})]}),a.phone&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"Phone"}),(0,t.jsx)("p",{className:"text-slate-900 mt-1",children:a.phone})]}),a.subject&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"Subject"}),(0,t.jsx)("p",{className:"text-slate-900 mt-1",children:a.subject})]}),a.service_interest&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"Service Interest"}),(0,t.jsx)("p",{className:"text-slate-900 mt-1",children:a.service_interest})]})]}),a.message&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-slate-700 block mb-3",children:"Message / Form Data"}),(0,t.jsx)("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:(0,t.jsx)(n.default,{data:a.message,formType:a.form_type||null})})]})]}),"documents"===m&&(0,t.jsx)("div",{children:(0,t.jsx)(o.default,{contactId:a.id,onFileClick:e=>{u(e)}})}),"activity"===m&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"bg-slate-50 rounded-lg p-6 border border-slate-200",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Submission Timeline"}),(0,t.jsx)("div",{className:"space-y-3",children:(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-indigo-600 rounded-full mt-2"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-slate-900",children:"Form Submitted"}),(0,t.jsx)("p",{className:"text-xs text-slate-500",children:g(a.created_at)})]})]})})]}),(0,t.jsx)("p",{className:"text-sm text-slate-500 text-center py-8",children:"Additional activity tracking coming soon"})]})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3 p-4 sm:p-6 border-t border-slate-200 bg-slate-50",children:[(0,t.jsx)("div",{className:"order-2 sm:order-1",children:p&&(0,t.jsx)("p",{className:"text-xs sm:text-sm text-red-600 font-medium text-center sm:text-left",children:"Click Delete again to confirm"})}),(0,t.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row gap-2 sm:gap-3 order-1 sm:order-2",children:[(0,t.jsx)("button",{onClick:i,className:"px-4 py-2 border border-slate-300 rounded-lg hover:bg-white transition-colors text-sm sm:text-base",children:"Close"}),(0,t.jsx)("button",{onClick:()=>{p?(d(a.id),i()):f(!0)},className:"px-4 py-2 rounded-lg transition-colors text-sm sm:text-base ".concat(p?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"),children:p?"Confirm Delete":"Delete"})]})]})]})}),x&&(0,t.jsx)(c.default,{file:x,isOpen:!!x,onClose:()=>u(null)})]})};var m=e.i(40826),h=e.i(83946),x=e.i(73664),u=e.i(67084),p=e.i(58400),f=e.i(66071),g=e.i(36034),b=e.i(97955),y=e.i(58013),v=e.i(75711),j=e.i(46100),w=e.i(40605),N=e.i(73379);e.s(["default",0,()=>{let[e,r]=(0,s.useState)([]),[n,o]=(0,s.useState)(!0),[c,k]=(0,s.useState)(""),[C,_]=(0,s.useState)(null),[S,D]=(0,s.useState)({}),[A,M]=(0,s.useState)(null);(0,s.useEffect)(()=>{E()},[]);let E=async()=>{o(!0),M(null);try{let{data:e,error:t}=await a.supabase.from("contacts").select("*").order("created_at",{ascending:!1});if(t)throw t;r(e),e&&e.length>0&&await T(e.map(e=>e.id))}catch(e){console.error("Error fetching contacts:",e),M("Failed to load contacts. Please try again."),w.toast.error("Failed to load contacts")}finally{o(!1)}},T=async e=>{try{let{data:t,error:s}=await a.supabase.from("file_uploads").select("contact_id").in("contact_id",e);if(s)throw s;let l={};t.forEach(e=>{l[e.contact_id]=(l[e.contact_id]||0)+1}),D(l)}catch(e){console.error("Error fetching file counts:",e)}},P=async t=>{try{let{error:s}=await a.supabase.from("contacts").delete().eq("id",t);if(s)throw s;r(e.filter(e=>e.id!==t)),_(null),w.toast.success("Contact deleted")}catch(e){console.error("Error deleting contact:",e),w.toast.error("Failed to delete contact")}},L=(0,x.useDebounce)(c,300),F=(0,s.useMemo)(()=>{if(!L)return e;let t=L.toLowerCase();return e.filter(e=>{var s,a,l;return(null==(s=e.name)?void 0:s.toLowerCase().includes(t))||(null==(a=e.email)?void 0:a.toLowerCase().includes(t))||(null==(l=e.subject)?void 0:l.toLowerCase().includes(t))})},[e,L]);return(0,t.jsx)(i.default,{children:(0,t.jsxs)(l.default,{children:[(0,t.jsx)(N.default,{title:"Admin Contacts",noindex:!0}),(0,t.jsx)(m.default,{errorMessage:"Failed to load contacts page",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Contacts"}),(0,t.jsx)("p",{className:"text-slate-600 mt-2",children:"Manage form submissions"})]})}),(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-4 border border-slate-200",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("label",{htmlFor:"contact-search",className:"sr-only",children:"Search contacts"}),(0,t.jsx)(u.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400","aria-hidden":"true"}),(0,t.jsx)("input",{id:"contact-search",type:"text",placeholder:"Search contacts...",value:c,onChange:e=>k(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500","aria-label":"Search contacts by name, email, or subject"})]})}),A&&(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center border border-red-200",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-red-100 rounded-full mx-auto mb-4",children:(0,t.jsx)(j.AlertCircle,{className:"w-6 h-6 text-red-600"})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Failed to Load Contacts"}),(0,t.jsx)("p",{className:"text-slate-600 mb-6",children:A}),(0,t.jsx)("button",{onClick:E,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Try Again"})]}),!A&&(n||F.length>0)?(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-slate-200",children:[(0,t.jsx)("thead",{className:"bg-slate-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Name"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Contact"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Subject"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Files"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Date"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-slate-200",children:n?(0,t.jsx)(h.TableRowSkeleton,{columns:6,rows:5}):F.map(e=>{let s=S[e.id]||0;return(0,t.jsxs)("tr",{className:"hover:bg-slate-50",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm font-medium text-slate-900",children:e.name})}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,t.jsxs)("div",{className:"text-sm text-slate-900 flex items-center space-x-1",children:[(0,t.jsx)(p.Mail,{className:"w-4 h-4 text-slate-400"}),(0,t.jsx)("span",{children:e.email})]}),e.phone&&(0,t.jsxs)("div",{className:"text-sm text-slate-500 flex items-center space-x-1 mt-1",children:[(0,t.jsx)(f.Phone,{className:"w-4 h-4 text-slate-400"}),(0,t.jsx)("span",{children:e.phone})]})]}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("div",{className:"text-sm text-slate-900",children:e.subject})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:s>0?(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(v.FileText,{className:"w-4 h-4 text-indigo-600"}),(0,t.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:[s," ",1===s?"file":"files"]})]}):(0,t.jsx)("span",{className:"text-sm text-slate-400",children:"No files"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"text-sm text-slate-500 flex items-center space-x-1",children:[(0,t.jsx)(g.Calendar,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,t.jsx)("button",{onClick:()=>_(e),className:"text-indigo-600 hover:text-teal-900 mr-3","aria-label":"View details for ".concat(e.name),title:"View contact details",children:(0,t.jsx)(b.Eye,{className:"w-5 h-5","aria-hidden":"true"})}),(0,t.jsx)("button",{onClick:()=>P(e.id),className:"text-red-600 hover:text-red-900","aria-label":"Delete contact ".concat(e.name),title:"Delete contact",children:(0,t.jsx)(y.Trash2,{className:"w-5 h-5","aria-hidden":"true"})})]})]},e.id)})})]})})}):!A&&0===F.length&&(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center border border-slate-200",children:[(0,t.jsx)(p.Mail,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-slate-600",children:"No contacts found"}),c&&(0,t.jsx)("p",{className:"text-slate-500 text-sm mt-2",children:"Try adjusting your search"})]}),(0,t.jsx)(d,{contact:C,isOpen:!!C,onClose:()=>_(null),onDelete:P})]})})]})})}],15989)},75340,(e,t,s)=>{let a="/admin/contacts";(window.__NEXT_P=window.__NEXT_P||[]).push([a,()=>e.r(15989)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([a])})},60749,e=>{e.v(t=>Promise.all(["static/chunks/402acb69c81b29a7.js"].map(t=>e.l(t))).then(()=>t(14028)))},72031,e=>{e.v(t=>Promise.all(["static/chunks/e2cadd03fd9cfbfd.js"].map(t=>e.l(t))).then(()=>t(38439)))},79918,e=>{e.v(e=>Promise.resolve().then(()=>e(15002)))}]);